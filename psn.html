<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Overlay</title>
</head>
<style>
.container {
  position: relative;
  text-align: center;
  color: ;

}
.centered {
  position: absolute;
  top: 35%;
  left: 35%;
  color: White;
  font-size:30px;
  transform: translate(-50%, -50%);
}
.centered_2 {
  position: absolute;
  top: 70%;
  left: 35%;
  color: grey;
  font-size:24px;
  transform: translate(-50%, -50%);
}
iframe {
display: block; /* iframes are inline by default */
height: 100vh; /* Set height to 100% of the viewport height */
width: 100vw; /* Set width to 100% of the viewport width */
border: none; /* Remove default border */
}

</style>
<body>
    <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
    <script>
        function getQueryParam(name) {
            const regex = new RegExp('[?&]' + name + '=([^&#]*)', 'i');
            const result = regex.exec(window.location.search);
            return result ? decodeURIComponent(result[1]) : null;
        }

        var streamer = getQueryParam("streamer")
	var token = getQueryParam("t")
        var hex = getQueryParam("hex") || "red"

   ComfyJS.onReward =  (user, reward, cost, message, extra) => {
            const img = document.getElementById("myImage");
            const snd = document.getElementById("mySnd");
			snd.src = "static/psn.mp3";
            img.src = "/static/psn?reward="+reward; // Replace with the new image URL
	    setTimeout(()=>{
		img.src = ""; // Replace with the new image URL    
		snd.src = ""; // Replace with the new image URL    
	    },5000)
        }
        ComfyJS.Init(streamer, token) 
    </script>
    <iframe id="myImage" src="" alt="Blank"></iframe>
		<audio autoplay id="mySnd" src="static/psn.mp3" type="audio/mpeg"></audio>
    </div>
</body>

</html>
